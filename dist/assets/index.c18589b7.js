(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const e of i)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function a(i){const e={};return i.integrity&&(e.integrity=i.integrity),i.referrerpolicy&&(e.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?e.credentials="include":i.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(i){if(i.ep)return;i.ep=!0;const e=a(i);fetch(i.href,e)}})();function h(o){const t=o,a=[];return{length:o,health:t,shipPlacement:a,isSunken:function(){return this.health===0},hit:function(){this.health-=1},placeShip:function(r){for(let l=0;l<this.shipPlacement.length;l++)a.shift();r.forEach(l=>a.push(l))}}}function g(){const o=[];for(let e=0;e<10;e++)o.push([0,0,0,0,0,0,0,0,0,0]);const t=new Map;return t.set("Carrier",h(5)),t.set("Battleship",h(4)),t.set("Destroyer",h(3)),t.set("Submarine",h(3)),t.set("Patrol Boat",h(2)),{board:o,ships:t,placeShip:function(e,r,l){const c=l[0],f=l[1],d=t.get(e),k=()=>{if(r==="horizontal"&&c+d.length<=9){let s=this.board[f].slice(c,c+d.length);if(s=s.filter(u=>u===0||u===e),this.board[f][c],s.length===d.length)return!0}if(r==="vertical"&&f+d.length<=9){let s=[];for(let u=0;u<d.length;u++)s.push(this.board[f+u][c]);if(s=s.filter(u=>u===0||u===e),s.length===d.length)return!0}return!1},_=()=>{const s=[];this.board.forEach(u=>s.push(u.map(S=>S===e?0:S))),this.board=s};if(k()){if(_(),r==="horizontal")for(let s=0;s<d.length;s++)this.board[f][c+s]=e;if(r==="vertical")for(let s=0;s<d.length;s++)this.board[f+s][c]=e;return!0}return!1},receiveHit:function(e){const r=e[0],l=e[1];if(typeof this.board[l][r]=="string"){const c=t.get(this.board[l][r]);return c.hit(),this.board[l][r]=-2,{didHit:!0,didSink:c.isSunken(),ship:c}}else return this.board[l][r]=-1,{didHit:!1,didSink:!1,ship:null}},isFleetSunken:function(){for(const e of this.ships.values())if(e.isSunken()!==!0)return!1;return!0}}}function m(o,t){const a=function(e,r){return e.board.receiveHit(r)},n=[];for(let e=0;e<10;e++)for(let r=0;r<10;r++)n.push([e,r]);return{isComputer:o,board:t,attack:a,squaresLeft:n,aiAttack:function(e){const r=this.squaresLeft[Math.floor(Math.random()*(this.squaresLeft.length-1))];return this.squaresLeft.splice(this.squaresLeft.indexOf(r),1),a(e,r)}}}function p(o,t,a){const n=[];o.board.forEach(i=>{i.forEach(e=>{const r=document.createElement("div");r.classList.add("board__square"),typeof e=="string"&&a===!0?r.classList.add("board__square--ship"):e===-1?r.classList.add("board__square--miss"):e===-2?r.classList.add("board__square--hit"):r.classList.add("board__square--water"),n.push(r)})}),t.replaceChildren(...n)}function E(o,t,a){t.board[a[1]][a[0]]===-1&&(o.classList.add("board__square--miss"),o.classList.remove("board__square--water")),t.board[a[1]][a[0]]===-2&&(o.classList.add("board__square--hit"),o.classList.remove("board__square--water"))}const b=document.querySelector(".left-side-board"),y=document.querySelector(".right-side-board");L();function v(o){console.log(o),L()}function L(){const o=m(!1,g()),t=m(!0,g());p(o.board,b,!0),o.board.placeShip("Carrier","horizontal",[0,0]),o.board.placeShip("Destroyer","vertical",[7,1]),o.board.placeShip("Patrol Boat","horizontal",[0,2]),o.board.placeShip("Submarine","vertical",[5,3]),o.board.placeShip("Battleship","horizontal",[2,8]),p(o.board,b,!0),t.board.placeShip("Carrier","horizontal",[0,0]),t.board.placeShip("Destroyer","vertical",[7,1]),t.board.placeShip("Patrol Boat","horizontal",[0,2]),t.board.placeShip("Submarine","vertical",[5,3]),t.board.placeShip("Battleship","horizontal",[2,8]),p(t.board,y,!1),y.querySelectorAll(".board__square").forEach((n,i)=>{n.style.cursor="pointer",n.addEventListener("click",o.attack.bind(null,t,[Math.floor(i/10),i%10])),n.addEventListener("click",function(){this.style.cursor="auto",this.style.pointerEvents="none"}),n.addEventListener("click",E.bind(null,n,t.board,[Math.floor(i/10),i%10])),n.addEventListener("click",function(){t.board.isFleetSunken()&&v("You are victorious")}),n.addEventListener("click",function(){t.aiAttack(o),p(o.board,b,!0),o.board.isFleetSunken()&&v("Computer is victorious")})})}
